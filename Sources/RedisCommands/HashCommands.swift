//===----------------------------------------------------------------------===//
//
// This source file is part of the swift-redis open source project
//
// Copyright (c) 2025 Apple Inc. and the swift-redis project authors
// Licensed under Apache License v2.0
//
// See LICENSE.txt for license information
// See CONTRIBUTORS.txt for the list of swift-redis project authors
//
// SPDX-License-Identifier: Apache-2.0
//
//===----------------------------------------------------------------------===//

// This file is autogenerated by RedisCommandsBuilder

import NIOCore
import Redis

#if canImport(FoundationEssentials)
import FoundationEssentials
#else
import Foundation
#endif

/// Deletes one or more fields and their values from a hash. Deletes the hash if no fields remain.
public struct HDEL: RedisCommand {
    public typealias Response = Int

    public var key: RedisKey
    public var field: [String]

    @inlinable public init(key: RedisKey, field: [String]) {
        self.key = key
        self.field = field
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HDEL", key, field)
    }
}

/// Determines whether a field exists in a hash.
public struct HEXISTS: RedisCommand {
    public typealias Response = Int

    public var key: RedisKey
    public var field: String

    @inlinable public init(key: RedisKey, field: String) {
        self.key = key
        self.field = field
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HEXISTS", key, field)
    }
}

/// Returns the value of a field in a hash.
public struct HGET: RedisCommand {
    public typealias Response = String?

    public var key: RedisKey
    public var field: String

    @inlinable public init(key: RedisKey, field: String) {
        self.key = key
        self.field = field
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HGET", key, field)
    }
}

/// Returns all fields and values in a hash.
public struct HGETALL: RedisCommand {
    public typealias Response = [String: RESPToken]

    public var key: RedisKey

    @inlinable public init(key: RedisKey) {
        self.key = key
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HGETALL", key)
    }
}

/// Increments the integer value of a field in a hash by a number. Uses 0 as initial value if the field doesn't exist.
public struct HINCRBY: RedisCommand {
    public typealias Response = Int

    public var key: RedisKey
    public var field: String
    public var increment: Int

    @inlinable public init(key: RedisKey, field: String, increment: Int) {
        self.key = key
        self.field = field
        self.increment = increment
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HINCRBY", key, field, increment)
    }
}

/// Increments the floating point value of a field by a number. Uses 0 as initial value if the field doesn't exist.
public struct HINCRBYFLOAT: RedisCommand {
    public typealias Response = String

    public var key: RedisKey
    public var field: String
    public var increment: Double

    @inlinable public init(key: RedisKey, field: String, increment: Double) {
        self.key = key
        self.field = field
        self.increment = increment
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HINCRBYFLOAT", key, field, increment)
    }
}

/// Returns all fields in a hash.
public struct HKEYS: RedisCommand {
    public typealias Response = [RESPToken]

    public var key: RedisKey

    @inlinable public init(key: RedisKey) {
        self.key = key
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HKEYS", key)
    }
}

/// Returns the number of fields in a hash.
public struct HLEN: RedisCommand {
    public typealias Response = Int

    public var key: RedisKey

    @inlinable public init(key: RedisKey) {
        self.key = key
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HLEN", key)
    }
}

/// Returns the values of all fields in a hash.
public struct HMGET: RedisCommand {
    public typealias Response = [RESPToken]

    public var key: RedisKey
    public var field: [String]

    @inlinable public init(key: RedisKey, field: [String]) {
        self.key = key
        self.field = field
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HMGET", key, field)
    }
}

/// Sets the values of multiple fields.
public struct HMSET: RedisCommand {
    public struct Data: RESPRenderable {
        @usableFromInline let field: String
        @usableFromInline let value: String

        @inlinable
        public func encode(into commandEncoder: inout RedisCommandEncoder) -> Int {
            var count = 0
            count += field.encode(into: &commandEncoder)
            count += value.encode(into: &commandEncoder)
            return count
        }
    }
    public typealias Response = RESPToken

    public var key: RedisKey
    public var data: [Data]

    @inlinable public init(key: RedisKey, data: [Data]) {
        self.key = key
        self.data = data
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HMSET", key, data)
    }
}

/// Returns one or more random fields from a hash.
public struct HRANDFIELD: RedisCommand {
    public struct Options: RESPRenderable {
        @usableFromInline let count: Int
        @usableFromInline let withvalues: Bool

        @inlinable
        public func encode(into commandEncoder: inout RedisCommandEncoder) -> Int {
            var count = 0
            count += count.encode(into: &commandEncoder)
            if self.withvalues { count += "WITHVALUES".encode(into: &commandEncoder) }
            return count
        }
    }
    public typealias Response = RESPToken

    public var key: RedisKey
    public var options: Options? = nil

    @inlinable public init(key: RedisKey, options: Options? = nil) {
        self.key = key
        self.options = options
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HRANDFIELD", key, options)
    }
}

/// Iterates over fields and values of a hash.
public struct HSCAN: RedisCommand {
    public typealias Response = [RESPToken]

    public var key: RedisKey
    public var cursor: Int
    public var pattern: String? = nil
    public var count: Int? = nil

    @inlinable public init(key: RedisKey, cursor: Int, pattern: String? = nil, count: Int? = nil) {
        self.key = key
        self.cursor = cursor
        self.pattern = pattern
        self.count = count
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HSCAN", key, cursor, RESPWithToken("MATCH", pattern), RESPWithToken("COUNT", count))
    }
}

/// Creates or modifies the value of a field in a hash.
public struct HSET: RedisCommand {
    public struct Data: RESPRenderable {
        @usableFromInline let field: String
        @usableFromInline let value: String

        @inlinable
        public func encode(into commandEncoder: inout RedisCommandEncoder) -> Int {
            var count = 0
            count += field.encode(into: &commandEncoder)
            count += value.encode(into: &commandEncoder)
            return count
        }
    }
    public typealias Response = Int

    public var key: RedisKey
    public var data: [Data]

    @inlinable public init(key: RedisKey, data: [Data]) {
        self.key = key
        self.data = data
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HSET", key, data)
    }
}

/// Sets the value of a field in a hash only when the field doesn't exist.
public struct HSETNX: RedisCommand {
    public typealias Response = Int

    public var key: RedisKey
    public var field: String
    public var value: String

    @inlinable public init(key: RedisKey, field: String, value: String) {
        self.key = key
        self.field = field
        self.value = value
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HSETNX", key, field, value)
    }
}

/// Returns the length of the value of a field.
public struct HSTRLEN: RedisCommand {
    public typealias Response = Int

    public var key: RedisKey
    public var field: String

    @inlinable public init(key: RedisKey, field: String) {
        self.key = key
        self.field = field
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HSTRLEN", key, field)
    }
}

/// Returns all values in a hash.
public struct HVALS: RedisCommand {
    public typealias Response = [RESPToken]

    public var key: RedisKey

    @inlinable public init(key: RedisKey) {
        self.key = key
    }

    @inlinable public func encode(into commandEncoder: inout RedisCommandEncoder) {
        commandEncoder.encodeArray("HVALS", key)
    }
}


extension RedisConnection {
    /// Deletes one or more fields and their values from a hash. Deletes the hash if no fields remain.
    ///
    /// - Documentation: [HDEL](https:/redis.io/docs/latest/commands/hdel)
    /// - Version: 2.0.0
    /// - Complexity: O(N) where N is the number of fields to be removed.
    /// - Categories: @write, @hash, @fast
    /// - Returns: [Integer](https:/redis.io/docs/reference/protocol-spec#integers): The number of fields that were removed from the hash, excluding any specified but non-existing fields.
    @inlinable
    public func hdel(key: RedisKey, field: [String]) async throws -> Int {
        try await send(command: HDEL(key: key, field: field))
    }

    /// Determines whether a field exists in a hash.
    ///
    /// - Documentation: [HEXISTS](https:/redis.io/docs/latest/commands/hexists)
    /// - Version: 2.0.0
    /// - Complexity: O(1)
    /// - Categories: @read, @hash, @fast
    /// - Returns: One of the following:
    ///     * [Integer](https:/redis.io/docs/reference/protocol-spec#integers): `0` if the hash does not contain the field, or the key does not exist.
    ///     * [Integer](https:/redis.io/docs/reference/protocol-spec#integers): `1` if the hash contains the field.
    @inlinable
    public func hexists(key: RedisKey, field: String) async throws -> Int {
        try await send(command: HEXISTS(key: key, field: field))
    }

    /// Returns the value of a field in a hash.
    ///
    /// - Documentation: [HGET](https:/redis.io/docs/latest/commands/hget)
    /// - Version: 2.0.0
    /// - Complexity: O(1)
    /// - Categories: @read, @hash, @fast
    /// - Returns: One of the following:
    ///     * [Bulk string](https:/redis.io/docs/reference/protocol-spec#bulk-strings): The value associated with the field.
    ///     * [Null](https:/redis.io/docs/reference/protocol-spec#nulls): If the field is not present in the hash or key does not exist.
    @inlinable
    public func hget(key: RedisKey, field: String) async throws -> String? {
        try await send(command: HGET(key: key, field: field))
    }

    /// Returns all fields and values in a hash.
    ///
    /// - Documentation: [HGETALL](https:/redis.io/docs/latest/commands/hgetall)
    /// - Version: 2.0.0
    /// - Complexity: O(N) where N is the size of the hash.
    /// - Categories: @read, @hash, @slow
    /// - Returns: [Map](https:/redis.io/docs/reference/protocol-spec#maps): a map of fields and their values stored in the hash, or an empty list when key does not exist.
    @inlinable
    public func hgetall(key: RedisKey) async throws -> [String: RESPToken] {
        try await send(command: HGETALL(key: key))
    }

    /// Increments the integer value of a field in a hash by a number. Uses 0 as initial value if the field doesn't exist.
    ///
    /// - Documentation: [HINCRBY](https:/redis.io/docs/latest/commands/hincrby)
    /// - Version: 2.0.0
    /// - Complexity: O(1)
    /// - Categories: @write, @hash, @fast
    /// - Returns: [Integer](https:/redis.io/docs/reference/protocol-spec#integers): the value of the field after the increment operation.
    @inlinable
    public func hincrby(key: RedisKey, field: String, increment: Int) async throws -> Int {
        try await send(command: HINCRBY(key: key, field: field, increment: increment))
    }

    /// Increments the floating point value of a field by a number. Uses 0 as initial value if the field doesn't exist.
    ///
    /// - Documentation: [HINCRBYFLOAT](https:/redis.io/docs/latest/commands/hincrbyfloat)
    /// - Version: 2.6.0
    /// - Complexity: O(1)
    /// - Categories: @write, @hash, @fast
    /// - Returns: [Bulk string](https:/redis.io/docs/reference/protocol-spec#bulk-strings): The value of the field after the increment operation.
    @inlinable
    public func hincrbyfloat(key: RedisKey, field: String, increment: Double) async throws -> String {
        try await send(command: HINCRBYFLOAT(key: key, field: field, increment: increment))
    }

    /// Returns all fields in a hash.
    ///
    /// - Documentation: [HKEYS](https:/redis.io/docs/latest/commands/hkeys)
    /// - Version: 2.0.0
    /// - Complexity: O(N) where N is the size of the hash.
    /// - Categories: @read, @hash, @slow
    /// - Returns: [Array](https:/redis.io/docs/reference/protocol-spec#arrays): a list of fields in the hash, or an empty list when the key does not exist.
    @inlinable
    public func hkeys(key: RedisKey) async throws -> [RESPToken] {
        try await send(command: HKEYS(key: key))
    }

    /// Returns the number of fields in a hash.
    ///
    /// - Documentation: [HLEN](https:/redis.io/docs/latest/commands/hlen)
    /// - Version: 2.0.0
    /// - Complexity: O(1)
    /// - Categories: @read, @hash, @fast
    /// - Returns: [Integer](https:/redis.io/docs/reference/protocol-spec#integers): the number of the fields in the hash, or 0 when the key does not exist.
    @inlinable
    public func hlen(key: RedisKey) async throws -> Int {
        try await send(command: HLEN(key: key))
    }

    /// Returns the values of all fields in a hash.
    ///
    /// - Documentation: [HMGET](https:/redis.io/docs/latest/commands/hmget)
    /// - Version: 2.0.0
    /// - Complexity: O(N) where N is the number of fields being requested.
    /// - Categories: @read, @hash, @fast
    /// - Returns: [Array](https:/redis.io/docs/reference/protocol-spec#arrays): a list of values associated with the given fields, in the same order as they are requested.
    @inlinable
    public func hmget(key: RedisKey, field: [String]) async throws -> [RESPToken] {
        try await send(command: HMGET(key: key, field: field))
    }

    /// Sets the values of multiple fields.
    ///
    /// - Documentation: [HMSET](https:/redis.io/docs/latest/commands/hmset)
    /// - Version: 2.0.0
    /// - Complexity: O(N) where N is the number of fields being set.
    /// - Categories: @write, @hash, @fast
    /// - Returns: [Simple string](https:/redis.io/docs/reference/protocol-spec#simple-strings): `OK`.
    @inlinable
    public func hmset(key: RedisKey, data: [HMSET.Data]) async throws -> RESPToken {
        try await send(command: HMSET(key: key, data: data))
    }

    /// Returns one or more random fields from a hash.
    ///
    /// - Documentation: [HRANDFIELD](https:/redis.io/docs/latest/commands/hrandfield)
    /// - Version: 6.2.0
    /// - Complexity: O(N) where N is the number of fields returned
    /// - Categories: @read, @hash, @slow
    /// - Returns: Any of the following:
    ///     * [Null](https:/redis.io/docs/reference/protocol-spec#nulls): if the key doesn't exist
    ///     * [Bulk string](https:/redis.io/docs/reference/protocol-spec#bulk-strings): a single, randomly selected field when the `count` option is not used
    ///     * [Array](https:/redis.io/docs/reference/protocol-spec#arrays): a list containing `count` fields when the `count` option is used, or an empty array if the key does not exists.
    ///     * [Array](https:/redis.io/docs/reference/protocol-spec#arrays): a list of fields and their values when `count` and `WITHVALUES` were both used.
    @inlinable
    public func hrandfield(key: RedisKey, options: HRANDFIELD.Options? = nil) async throws -> RESPToken {
        try await send(command: HRANDFIELD(key: key, options: options))
    }

    /// Iterates over fields and values of a hash.
    ///
    /// - Documentation: [HSCAN](https:/redis.io/docs/latest/commands/hscan)
    /// - Version: 2.8.0
    /// - Complexity: O(1) for every call. O(N) for a complete iteration, including enough command calls for the cursor to return back to 0. N is the number of elements inside the collection.
    /// - Categories: @read, @hash, @slow
    /// - Returns: [Array](https:/redis.io/docs/reference/protocol-spec#arrays): a two-element array.
    ///     * The first element is a [Bulk string](https:/redis.io/docs/reference/protocol-spec#bulk-strings) that represents an unsigned 64-bit number, the cursor.
    ///     * The second element is an [Array](https:/redis.io/docs/reference/protocol-spec#arrays) of field/value pairs that were scanned.
    @inlinable
    public func hscan(key: RedisKey, cursor: Int, pattern: String? = nil, count: Int? = nil) async throws -> [RESPToken] {
        try await send(command: HSCAN(key: key, cursor: cursor, pattern: pattern, count: count))
    }

    /// Creates or modifies the value of a field in a hash.
    ///
    /// - Documentation: [HSET](https:/redis.io/docs/latest/commands/hset)
    /// - Version: 2.0.0
    /// - Complexity: O(1) for each field/value pair added, so O(N) to add N field/value pairs when the command is called with multiple field/value pairs.
    /// - Categories: @write, @hash, @fast
    /// - Returns: [Integer](https:/redis.io/docs/reference/protocol-spec#integers): the number of fields that were added.
    @inlinable
    public func hset(key: RedisKey, data: [HSET.Data]) async throws -> Int {
        try await send(command: HSET(key: key, data: data))
    }

    /// Sets the value of a field in a hash only when the field doesn't exist.
    ///
    /// - Documentation: [HSETNX](https:/redis.io/docs/latest/commands/hsetnx)
    /// - Version: 2.0.0
    /// - Complexity: O(1)
    /// - Categories: @write, @hash, @fast
    /// - Returns: One of the following:
    ///     * [Integer](https:/redis.io/docs/reference/protocol-spec#integers): `0` if the field already exists in the hash and no operation was performed.
    ///     * [Integer](https:/redis.io/docs/reference/protocol-spec#integers): `1` if the field is a new field in the hash and the value was set.
    @inlinable
    public func hsetnx(key: RedisKey, field: String, value: String) async throws -> Int {
        try await send(command: HSETNX(key: key, field: field, value: value))
    }

    /// Returns the length of the value of a field.
    ///
    /// - Documentation: [HSTRLEN](https:/redis.io/docs/latest/commands/hstrlen)
    /// - Version: 3.2.0
    /// - Complexity: O(1)
    /// - Categories: @read, @hash, @fast
    /// - Returns: [Integer](https:/redis.io/docs/reference/protocol-spec#integers): the string length of the value associated with the _field_, or zero when the _field_ isn't present in the hash or the _key_ doesn't exist at all.
    @inlinable
    public func hstrlen(key: RedisKey, field: String) async throws -> Int {
        try await send(command: HSTRLEN(key: key, field: field))
    }

    /// Returns all values in a hash.
    ///
    /// - Documentation: [HVALS](https:/redis.io/docs/latest/commands/hvals)
    /// - Version: 2.0.0
    /// - Complexity: O(N) where N is the size of the hash.
    /// - Categories: @read, @hash, @slow
    /// - Returns: [Array](https:/redis.io/docs/reference/protocol-spec#arrays): a list of values in the hash, or an empty list when the key does not exist.
    @inlinable
    public func hvals(key: RedisKey) async throws -> [RESPToken] {
        try await send(command: HVALS(key: key))
    }

}
