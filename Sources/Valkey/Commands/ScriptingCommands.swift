//===----------------------------------------------------------------------===//
//
// This source file is part of the valkey-swift open source project
//
// Copyright (c) 2025 the valkey-swift project authors
// Licensed under Apache License v2.0
//
// See LICENSE.txt for license information
// See CONTRIBUTORS.txt for the list of valkey-swift project authors
//
// SPDX-License-Identifier: Apache-2.0
//
//===----------------------------------------------------------------------===//

// This file is autogenerated by ValkeyCommandsBuilder

import NIOCore

#if canImport(FoundationEssentials)
import FoundationEssentials
#else
import Foundation
#endif

/// A container for function commands.
@_documentation(visibility: internal)
public enum FUNCTION {
    /// Deletes a library and its functions.
    @_documentation(visibility: internal)
    public struct DELETE<LibraryName: RESPStringRenderable>: ValkeyCommand {
        public var libraryName: LibraryName

        @inlinable public init(libraryName: LibraryName) {
            self.libraryName = libraryName
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("FUNCTION", "DELETE", RESPBulkString(libraryName))
        }
    }

    /// Dumps all libraries into a serialized binary payload.
    @_documentation(visibility: internal)
    public struct DUMP: ValkeyCommand {
        public typealias Response = ByteBuffer

        @inlinable public init() {
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("FUNCTION", "DUMP")
        }
    }

    /// Deletes all libraries and functions.
    @_documentation(visibility: internal)
    public struct FLUSH: ValkeyCommand {
        public enum FlushType: RESPRenderable, Sendable, Hashable {
            case async
            case sync

            @inlinable
            public var respEntries: Int { 1 }

            @inlinable
            public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
                switch self {
                case .async: "ASYNC".encode(into: &commandEncoder)
                case .sync: "SYNC".encode(into: &commandEncoder)
                }
            }
        }
        public var flushType: FlushType?

        @inlinable public init(flushType: FlushType? = nil) {
            self.flushType = flushType
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("FUNCTION", "FLUSH", flushType)
        }
    }

    /// Returns helpful text about the different subcommands.
    @_documentation(visibility: internal)
    public struct HELP: ValkeyCommand {
        public typealias Response = RESPToken.Array

        @inlinable public init() {
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("FUNCTION", "HELP")
        }
    }

    /// Terminates a function during execution.
    @_documentation(visibility: internal)
    public struct KILL: ValkeyCommand {
        @inlinable public init() {
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("FUNCTION", "KILL")
        }
    }

    /// Returns information about all libraries.
    @_documentation(visibility: internal)
    public struct LIST: ValkeyCommand {
        public typealias Response = RESPToken.Array

        public var libraryNamePattern: String?
        public var withcode: Bool

        @inlinable public init(libraryNamePattern: String? = nil, withcode: Bool = false) {
            self.libraryNamePattern = libraryNamePattern
            self.withcode = withcode
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("FUNCTION", "LIST", RESPWithToken("LIBRARYNAME", libraryNamePattern), RESPPureToken("WITHCODE", withcode))
        }
    }

    /// Creates a library.
    @_documentation(visibility: internal)
    public struct LOAD<FunctionCode: RESPStringRenderable>: ValkeyCommand {
        public typealias Response = ByteBuffer

        public var replace: Bool
        public var functionCode: FunctionCode

        @inlinable public init(replace: Bool = false, functionCode: FunctionCode) {
            self.replace = replace
            self.functionCode = functionCode
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("FUNCTION", "LOAD", RESPPureToken("REPLACE", replace), RESPBulkString(functionCode))
        }
    }

    /// Restores all libraries from a payload.
    @_documentation(visibility: internal)
    public struct RESTORE<SerializedValue: RESPStringRenderable>: ValkeyCommand {
        public enum Policy: RESPRenderable, Sendable, Hashable {
            case flush
            case append
            case replace

            @inlinable
            public var respEntries: Int { 1 }

            @inlinable
            public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
                switch self {
                case .flush: "FLUSH".encode(into: &commandEncoder)
                case .append: "APPEND".encode(into: &commandEncoder)
                case .replace: "REPLACE".encode(into: &commandEncoder)
                }
            }
        }
        public var serializedValue: SerializedValue
        public var policy: Policy?

        @inlinable public init(serializedValue: SerializedValue, policy: Policy? = nil) {
            self.serializedValue = serializedValue
            self.policy = policy
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("FUNCTION", "RESTORE", RESPBulkString(serializedValue), policy)
        }
    }

    /// Returns information about a function during execution.
    @_documentation(visibility: internal)
    public struct STATS: ValkeyCommand {
        public typealias Response = RESPToken.Map

        @inlinable public init() {
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("FUNCTION", "STATS")
        }
    }

}

/// A container for Lua scripts management commands.
@_documentation(visibility: internal)
public enum SCRIPT {
    /// Sets the debug mode of server-side Lua scripts.
    @_documentation(visibility: internal)
    public struct DEBUG: ValkeyCommand {
        public enum Mode: RESPRenderable, Sendable, Hashable {
            case yes
            case sync
            case no

            @inlinable
            public var respEntries: Int { 1 }

            @inlinable
            public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
                switch self {
                case .yes: "YES".encode(into: &commandEncoder)
                case .sync: "SYNC".encode(into: &commandEncoder)
                case .no: "NO".encode(into: &commandEncoder)
                }
            }
        }
        public var mode: Mode

        @inlinable public init(mode: Mode) {
            self.mode = mode
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("SCRIPT", "DEBUG", mode)
        }
    }

    /// Determines whether server-side Lua scripts exist in the script cache.
    @_documentation(visibility: internal)
    public struct EXISTS<Sha1: RESPStringRenderable>: ValkeyCommand {
        public typealias Response = RESPToken.Array

        public var sha1s: [Sha1]

        @inlinable public init(sha1s: [Sha1]) {
            self.sha1s = sha1s
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("SCRIPT", "EXISTS", sha1s.map { RESPBulkString($0) })
        }
    }

    /// Removes all server-side Lua scripts from the script cache.
    @_documentation(visibility: internal)
    public struct FLUSH: ValkeyCommand {
        public enum FlushType: RESPRenderable, Sendable, Hashable {
            case async
            case sync

            @inlinable
            public var respEntries: Int { 1 }

            @inlinable
            public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
                switch self {
                case .async: "ASYNC".encode(into: &commandEncoder)
                case .sync: "SYNC".encode(into: &commandEncoder)
                }
            }
        }
        public var flushType: FlushType?

        @inlinable public init(flushType: FlushType? = nil) {
            self.flushType = flushType
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("SCRIPT", "FLUSH", flushType)
        }
    }

    /// Returns helpful text about the different subcommands.
    @_documentation(visibility: internal)
    public struct HELP: ValkeyCommand {
        public typealias Response = RESPToken.Array

        @inlinable public init() {
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("SCRIPT", "HELP")
        }
    }

    /// Terminates a server-side Lua script during execution.
    @_documentation(visibility: internal)
    public struct KILL: ValkeyCommand {
        @inlinable public init() {
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("SCRIPT", "KILL")
        }
    }

    /// Loads a server-side Lua script to the script cache.
    @_documentation(visibility: internal)
    public struct LOAD<Script: RESPStringRenderable>: ValkeyCommand {
        public typealias Response = ByteBuffer

        public var script: Script

        @inlinable public init(script: Script) {
            self.script = script
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("SCRIPT", "LOAD", RESPBulkString(script))
        }
    }

    /// Show server-side Lua script in the script cache.
    @_documentation(visibility: internal)
    public struct SHOW<Sha1: RESPStringRenderable>: ValkeyCommand {
        public typealias Response = ByteBuffer

        public var sha1: Sha1

        @inlinable public init(sha1: Sha1) {
            self.sha1 = sha1
        }

        @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
            commandEncoder.encodeArray("SCRIPT", "SHOW", RESPBulkString(sha1))
        }
    }

}

/// Executes a server-side Lua script.
@_documentation(visibility: internal)
public struct EVAL<Script: RESPStringRenderable>: ValkeyCommand {
    public var script: Script
    public var keys: [ValkeyKey]
    public var args: [String]

    @inlinable public init(script: Script, keys: [ValkeyKey] = [], args: [String] = []) {
        self.script = script
        self.keys = keys
        self.args = args
    }

    public var keysAffected: [ValkeyKey] { keys }

    @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
        commandEncoder.encodeArray("EVAL", RESPBulkString(script), RESPArrayWithCount(keys), args)
    }
}

/// Executes a server-side Lua script by SHA1 digest.
@_documentation(visibility: internal)
public struct EVALSHA<Sha1: RESPStringRenderable>: ValkeyCommand {
    public var sha1: Sha1
    public var keys: [ValkeyKey]
    public var args: [String]

    @inlinable public init(sha1: Sha1, keys: [ValkeyKey] = [], args: [String] = []) {
        self.sha1 = sha1
        self.keys = keys
        self.args = args
    }

    public var keysAffected: [ValkeyKey] { keys }

    @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
        commandEncoder.encodeArray("EVALSHA", RESPBulkString(sha1), RESPArrayWithCount(keys), args)
    }
}

/// Executes a read-only server-side Lua script by SHA1 digest.
@_documentation(visibility: internal)
public struct EVALSHARO<Sha1: RESPStringRenderable>: ValkeyCommand {
    public var sha1: Sha1
    public var keys: [ValkeyKey]
    public var args: [String]

    @inlinable public init(sha1: Sha1, keys: [ValkeyKey] = [], args: [String] = []) {
        self.sha1 = sha1
        self.keys = keys
        self.args = args
    }

    public var keysAffected: [ValkeyKey] { keys }

    public var isReadOnly: Bool { true }

    @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
        commandEncoder.encodeArray("EVALSHA_RO", RESPBulkString(sha1), RESPArrayWithCount(keys), args)
    }
}

/// Executes a read-only server-side Lua script.
@_documentation(visibility: internal)
public struct EVALRO<Script: RESPStringRenderable>: ValkeyCommand {
    public var script: Script
    public var keys: [ValkeyKey]
    public var args: [String]

    @inlinable public init(script: Script, keys: [ValkeyKey] = [], args: [String] = []) {
        self.script = script
        self.keys = keys
        self.args = args
    }

    public var keysAffected: [ValkeyKey] { keys }

    public var isReadOnly: Bool { true }

    @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
        commandEncoder.encodeArray("EVAL_RO", RESPBulkString(script), RESPArrayWithCount(keys), args)
    }
}

/// Invokes a function.
@_documentation(visibility: internal)
public struct FCALL<Function: RESPStringRenderable>: ValkeyCommand {
    public var function: Function
    public var keys: [ValkeyKey]
    public var args: [String]

    @inlinable public init(function: Function, keys: [ValkeyKey] = [], args: [String] = []) {
        self.function = function
        self.keys = keys
        self.args = args
    }

    public var keysAffected: [ValkeyKey] { keys }

    @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
        commandEncoder.encodeArray("FCALL", RESPBulkString(function), RESPArrayWithCount(keys), args)
    }
}

/// Invokes a read-only function.
@_documentation(visibility: internal)
public struct FCALLRO<Function: RESPStringRenderable>: ValkeyCommand {
    public var function: Function
    public var keys: [ValkeyKey]
    public var args: [String]

    @inlinable public init(function: Function, keys: [ValkeyKey] = [], args: [String] = []) {
        self.function = function
        self.keys = keys
        self.args = args
    }

    public var keysAffected: [ValkeyKey] { keys }

    public var isReadOnly: Bool { true }

    @inlinable public func encode(into commandEncoder: inout ValkeyCommandEncoder) {
        commandEncoder.encodeArray("FCALL_RO", RESPBulkString(function), RESPArrayWithCount(keys), args)
    }
}

extension ValkeyClientProtocol {
    /// Executes a server-side Lua script.
    ///
    /// - Documentation: [EVAL](https://valkey.io/commands/eval)
    /// - Available: 2.6.0
    /// - Complexity: Depends on the script that is executed.
    /// - Response: Return value depends on the script that is executed
    @inlinable
    @discardableResult
    public func eval<Script: RESPStringRenderable>(script: Script, keys: [ValkeyKey] = [], args: [String] = []) async throws -> RESPToken {
        try await execute(EVAL(script: script, keys: keys, args: args))
    }

    /// Executes a server-side Lua script by SHA1 digest.
    ///
    /// - Documentation: [EVALSHA](https://valkey.io/commands/evalsha)
    /// - Available: 2.6.0
    /// - Complexity: Depends on the script that is executed.
    /// - Response: Return value depends on the script that is executed
    @inlinable
    @discardableResult
    public func evalsha<Sha1: RESPStringRenderable>(sha1: Sha1, keys: [ValkeyKey] = [], args: [String] = []) async throws -> RESPToken {
        try await execute(EVALSHA(sha1: sha1, keys: keys, args: args))
    }

    /// Executes a read-only server-side Lua script by SHA1 digest.
    ///
    /// - Documentation: [EVALSHA_RO](https://valkey.io/commands/evalsha_ro)
    /// - Available: 7.0.0
    /// - Complexity: Depends on the script that is executed.
    /// - Response: Return value depends on the script that is executed
    @inlinable
    public func evalshaRo<Sha1: RESPStringRenderable>(sha1: Sha1, keys: [ValkeyKey] = [], args: [String] = []) async throws -> RESPToken {
        try await execute(EVALSHARO(sha1: sha1, keys: keys, args: args))
    }

    /// Executes a read-only server-side Lua script.
    ///
    /// - Documentation: [EVAL_RO](https://valkey.io/commands/eval_ro)
    /// - Available: 7.0.0
    /// - Complexity: Depends on the script that is executed.
    /// - Response: Return value depends on the script that is executed
    @inlinable
    public func evalRo<Script: RESPStringRenderable>(script: Script, keys: [ValkeyKey] = [], args: [String] = []) async throws -> RESPToken {
        try await execute(EVALRO(script: script, keys: keys, args: args))
    }

    /// Invokes a function.
    ///
    /// - Documentation: [FCALL](https://valkey.io/commands/fcall)
    /// - Available: 7.0.0
    /// - Complexity: Depends on the function that is executed.
    /// - Response: Return value depends on the function that is executed
    @inlinable
    @discardableResult
    public func fcall<Function: RESPStringRenderable>(function: Function, keys: [ValkeyKey] = [], args: [String] = []) async throws -> RESPToken {
        try await execute(FCALL(function: function, keys: keys, args: args))
    }

    /// Invokes a read-only function.
    ///
    /// - Documentation: [FCALL_RO](https://valkey.io/commands/fcall_ro)
    /// - Available: 7.0.0
    /// - Complexity: Depends on the function that is executed.
    /// - Response: Return value depends on the function that is executed
    @inlinable
    public func fcallRo<Function: RESPStringRenderable>(function: Function, keys: [ValkeyKey] = [], args: [String] = []) async throws -> RESPToken {
        try await execute(FCALLRO(function: function, keys: keys, args: args))
    }

    /// Deletes a library and its functions.
    ///
    /// - Documentation: [FUNCTION DELETE](https://valkey.io/commands/function-delete)
    /// - Available: 7.0.0
    /// - Complexity: O(1)
    @inlinable
    public func functionDelete<LibraryName: RESPStringRenderable>(libraryName: LibraryName) async throws {
        _ = try await execute(FUNCTION.DELETE(libraryName: libraryName))
    }

    /// Dumps all libraries into a serialized binary payload.
    ///
    /// - Documentation: [FUNCTION DUMP](https://valkey.io/commands/function-dump)
    /// - Available: 7.0.0
    /// - Complexity: O(N) where N is the number of functions
    /// - Response: [String]: The serialized payload.
    @inlinable
    @discardableResult
    public func functionDump() async throws -> ByteBuffer {
        try await execute(FUNCTION.DUMP())
    }

    /// Deletes all libraries and functions.
    ///
    /// - Documentation: [FUNCTION FLUSH](https://valkey.io/commands/function-flush)
    /// - Available: 7.0.0
    /// - Complexity: O(N) where N is the number of functions deleted
    @inlinable
    public func functionFlush(flushType: FUNCTION.FLUSH.FlushType? = nil) async throws {
        _ = try await execute(FUNCTION.FLUSH(flushType: flushType))
    }

    /// Returns helpful text about the different subcommands.
    ///
    /// - Documentation: [FUNCTION HELP](https://valkey.io/commands/function-help)
    /// - Available: 7.0.0
    /// - Complexity: O(1)
    /// - Response: [Array]: Helpful text about subcommands.
    @inlinable
    @discardableResult
    public func functionHelp() async throws -> RESPToken.Array {
        try await execute(FUNCTION.HELP())
    }

    /// Terminates a function during execution.
    ///
    /// - Documentation: [FUNCTION KILL](https://valkey.io/commands/function-kill)
    /// - Available: 7.0.0
    /// - Complexity: O(1)
    @inlinable
    public func functionKill() async throws {
        _ = try await execute(FUNCTION.KILL())
    }

    /// Returns information about all libraries.
    ///
    /// - Documentation: [FUNCTION LIST](https://valkey.io/commands/function-list)
    /// - Available: 7.0.0
    /// - Complexity: O(N) where N is the number of functions
    @inlinable
    @discardableResult
    public func functionList(libraryNamePattern: String? = nil, withcode: Bool = false) async throws -> RESPToken.Array {
        try await execute(FUNCTION.LIST(libraryNamePattern: libraryNamePattern, withcode: withcode))
    }

    /// Creates a library.
    ///
    /// - Documentation: [FUNCTION LOAD](https://valkey.io/commands/function-load)
    /// - Available: 7.0.0
    /// - Complexity: O(1) (considering compilation time is redundant)
    /// - Response: [String]: The library name that was loaded
    @inlinable
    @discardableResult
    public func functionLoad<FunctionCode: RESPStringRenderable>(replace: Bool = false, functionCode: FunctionCode) async throws -> ByteBuffer {
        try await execute(FUNCTION.LOAD(replace: replace, functionCode: functionCode))
    }

    /// Restores all libraries from a payload.
    ///
    /// - Documentation: [FUNCTION RESTORE](https://valkey.io/commands/function-restore)
    /// - Available: 7.0.0
    /// - Complexity: O(N) where N is the number of functions on the payload
    @inlinable
    public func functionRestore<SerializedValue: RESPStringRenderable>(
        serializedValue: SerializedValue,
        policy: FUNCTION.RESTORE<SerializedValue>.Policy? = nil
    ) async throws {
        _ = try await execute(FUNCTION.RESTORE(serializedValue: serializedValue, policy: policy))
    }

    /// Returns information about a function during execution.
    ///
    /// - Documentation: [FUNCTION STATS](https://valkey.io/commands/function-stats)
    /// - Available: 7.0.0
    /// - Complexity: O(1)
    @inlinable
    @discardableResult
    public func functionStats() async throws -> RESPToken.Map {
        try await execute(FUNCTION.STATS())
    }

    /// Sets the debug mode of server-side Lua scripts.
    ///
    /// - Documentation: [SCRIPT DEBUG](https://valkey.io/commands/script-debug)
    /// - Available: 3.2.0
    /// - Complexity: O(1)
    @inlinable
    public func scriptDebug(mode: SCRIPT.DEBUG.Mode) async throws {
        _ = try await execute(SCRIPT.DEBUG(mode: mode))
    }

    /// Determines whether server-side Lua scripts exist in the script cache.
    ///
    /// - Documentation: [SCRIPT EXISTS](https://valkey.io/commands/script-exists)
    /// - Available: 2.6.0
    /// - Complexity: O(N) with N being the number of scripts to check (so checking a single script is an O(1) operation).
    /// - Response: [Array]: An array of integers that correspond to the specified SHA1 digest arguments.
    @inlinable
    @discardableResult
    public func scriptExists<Sha1: RESPStringRenderable>(sha1s: [Sha1]) async throws -> RESPToken.Array {
        try await execute(SCRIPT.EXISTS(sha1s: sha1s))
    }

    /// Removes all server-side Lua scripts from the script cache.
    ///
    /// - Documentation: [SCRIPT FLUSH](https://valkey.io/commands/script-flush)
    /// - Available: 2.6.0
    /// - History:
    ///     * 6.2.0: Added the `ASYNC` and `SYNC` flushing mode modifiers.
    /// - Complexity: O(N) with N being the number of scripts in cache
    @inlinable
    public func scriptFlush(flushType: SCRIPT.FLUSH.FlushType? = nil) async throws {
        _ = try await execute(SCRIPT.FLUSH(flushType: flushType))
    }

    /// Returns helpful text about the different subcommands.
    ///
    /// - Documentation: [SCRIPT HELP](https://valkey.io/commands/script-help)
    /// - Available: 5.0.0
    /// - Complexity: O(1)
    /// - Response: [Array]: Helpful text about subcommands.
    @inlinable
    @discardableResult
    public func scriptHelp() async throws -> RESPToken.Array {
        try await execute(SCRIPT.HELP())
    }

    /// Terminates a server-side Lua script during execution.
    ///
    /// - Documentation: [SCRIPT KILL](https://valkey.io/commands/script-kill)
    /// - Available: 2.6.0
    /// - Complexity: O(1)
    @inlinable
    public func scriptKill() async throws {
        _ = try await execute(SCRIPT.KILL())
    }

    /// Loads a server-side Lua script to the script cache.
    ///
    /// - Documentation: [SCRIPT LOAD](https://valkey.io/commands/script-load)
    /// - Available: 2.6.0
    /// - Complexity: O(N) with N being the length in bytes of the script body.
    /// - Response: [String]: The SHA1 digest of the script added into the script cache
    @inlinable
    @discardableResult
    public func scriptLoad<Script: RESPStringRenderable>(script: Script) async throws -> ByteBuffer {
        try await execute(SCRIPT.LOAD(script: script))
    }

    /// Show server-side Lua script in the script cache.
    ///
    /// - Documentation: [SCRIPT SHOW](https://valkey.io/commands/script-show)
    /// - Available: 8.0.0
    /// - Complexity: O(1).
    /// - Response: [String]: Lua script if sha1 hash exists in script cache.
    @inlinable
    @discardableResult
    public func scriptShow<Sha1: RESPStringRenderable>(sha1: Sha1) async throws -> ByteBuffer {
        try await execute(SCRIPT.SHOW(sha1: sha1))
    }

}
